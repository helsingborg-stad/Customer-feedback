!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){CustomerFeedback=CustomerFeedback||{},CustomerFeedback.Form=CustomerFeedback.Form||{},CustomerFeedback.Form=function(e){function t(){this.handleEvents()}return t.prototype.handleEvents=function(){e('[data-action="customer-feedback-submit-response"]').on("click",function(t){t.preventDefault(),$target=e(t.target).parents(".customer-feedback-container"),e(t.target).html('<i class="spinner spinner-dark"></i>');var n=$target.find('[name="customer-feedback-post-id"]').val(),a=e(t.target).val();this.submitInitialResponse($target,n,a)}.bind(this)),e('[data-action="customer-feedback-submit-comment"]').on("click",function(t){t.preventDefault(),$target=e(t.target).parents(".customer-feedback-container"),$target.find('[name="customer-feedback-comment-text"]').removeClass("invalid"),$target.find("div.danger").remove();var n=$target.find('[name="customer-feedback-answer-id"]').val(),a=$target.find('[name="customer-feedback-post-id"]').val(),r=$target.find('[name="customer-feedback-comment-text"]').val(),i=$target.find('[name="g-recaptcha-response"]').val(),o=$target.find('[name="customer-feedback-comment-email"]').val(),c=$target.find('[name="customer-feedback-comment-email"]').prop("required"),s=$target.find('[name="customer-feedback-comment-topic"]:checked').val(),d=!0;if(e("div.customer-feedback-topics").is(":visible")&&!s&&($target.find('[name="customer-feedback-comment-topic"]:last').parent().after('<div class="clearfix"></div><div style="margin-top: 5px;" class="notice notice-sm danger">'+feedback.select_topic+"</div>"),d=!1),r.length<15&&($target.find('[name="customer-feedback-comment-text"]').addClass("invalid"),$target.find('[name="customer-feedback-comment-text"]').after('<div class="clearfix"></div><div style="margin-top: 5px;" class="notice notice-sm danger">'+feedback.comment_min_characters+"</div>"),d=!1),0===o.length&&1==c&&(d=!1),!d)return!1;e(t.target).html('<i class="spinner spinner-dark"></i>'),this.submitComment($target,n,a,"comment",r,o,i,s)}.bind(this)),e('[name="customer-feedback-comment-topic"]').change((function(t){$target=e(t.target).parents(".customer-feedback-container"),$target.find("div.customer-feedback-topics div.danger").remove(),e(t.target).attr("topic-description")?$target.find(".topic-description").show().html('<span class="text-sm">'+e(t.target).attr("topic-description")+"</span>"):$target.find(".topic-description").hide(),e(t.target).attr("feedback-capability")?$target.find('[name="customer-feedback-comment-email"]').prop("required",!0).parent().show():$target.find('[name="customer-feedback-comment-email"]').prop("required",!1).parent().hide()}))},t.prototype.submitComment=function(t,n,a,r,i,o,c,s){var d={action:"submit_comment",postid:a,comment:i,answerid:n,commenttype:r,email:o,captcha:c,topicid:s},m=t;e.post(ajaxurl,d,(function(e){"true"==e?(m.find(".customer-feedback-comment").remove(),m.find(".customer-feedback-thanks").show()):(m.find(".customer-feedback-comment").remove(),m.find(".customer-feedback-error").show())}))},t.prototype.submitInitialResponse=function(t,n,a){var r=t,i={action:"submit_response",postid:n,answer:a};e.post(ajaxurl,i,(function(e){"yes"==i.answer&&!isNaN(parseFloat(e))&&isFinite(e)&&(r.find(".customer-feedback-topics").hide(),r.find('[name="customer-feedback-comment-email"]').parent().hide(),r.find('[name="customer-feedback-post-id"]').after('<input type="hidden" name="customer-feedback-answer-id" value="'+e+'">'),r.find(".customer-feedback-answers").remove(),r.find(".customer-feedback-comment").show().find(".feedback-label-yes").show()),"no"==i.answer&&!isNaN(parseFloat(e))&&isFinite(e)&&(r.find('[name="customer-feedback-post-id"]').after('<input type="hidden" name="customer-feedback-answer-id" value="'+e+'">'),r.find(".customer-feedback-answers").remove(),r.find(".customer-feedback-comment").show().find(".feedback-label-no").show())}))},new t}(jQuery)}]);