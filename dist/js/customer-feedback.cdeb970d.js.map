{"version":3,"file":"js/customer-feedback.cdeb970d.js","mappings":"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","sources":["webpack://@helsingborg-stad/customerfeedback/./source/js/form.js","webpack://@helsingborg-stad/customerfeedback/./source/js/app.js"],"sourcesContent":["export default () => {\n\n    const parentDomElement = null;\n\n    let settings = null;\n    let initialFeedbackId = null;\n\n    function Form() {\n        this.parentDomElement = document.querySelector('[data-js-cf]');\n        if (!this.parentDomElement) {\n            return;\n        }\n\n        //Parse and store the json data\n        this.getSettings(this.parentDomElement);\n\n        //Render initial state\n        this.renderInitialState(this.parentDomElement);\n\n        //Handle feedback buttons\n        this.handleFeedbackButtons(this.parentDomElement);\n\n        //Handle topic selection\n        this.handleTopicSelection(this.parentDomElement);\n\n        //Handle form submission\n        this.handleCommentFormSubmission(this.parentDomElement);\n    }\n\n    /**\n     * Get JSON data from data-js-cf attribute\n     * @param {HTMLElement} customerFeedbackInstance\n     * @returns {void}\n     */\n    Form.prototype.getSettings = function (customerFeedbackInstance) {\n        try {\n            this.settings = JSON.parse(customerFeedbackInstance.getAttribute('data-js-cf'));\n        } catch (error) {\n            console.error('Invalid settings JSON data in data-js-cf attribute:', error);\n        }\n    }\n\n    /**\n     * Render initial state of the form\n     * @param {HTMLElement} customerFeedbackInstance\n     * \n     * @returns {void}\n     */\n    Form.prototype.renderInitialState = function (customerFeedbackInstance) {\n\n        this.hidePartial('notices');\n        this.hidePartial('topics');\n        this.hidePartial('comment');\n        this.hidePartial('gdpr');\n        \n        this.hideNotice('error');\n        this.hideNotice('success');\n\n        if (this.hasGivenFeedback(this.settings.postId, this.settings.frequency)) {\n            this.showNotice('alreadysubmitted');\n            this.hidePartial('buttons');\n        } else {\n            this.hideNotice('alreadysubmitted');\n            this.showPartial('buttons');\n        }\n    };\n\n    /**\n     * Handle yes/no buttons\n     */\n    Form.prototype.handleFeedbackButtons = function (customerFeedbackInstance) {\n        let     self            = this;\n        const   feedbackButtons = customerFeedbackInstance.querySelectorAll('[data-js-cf-action]');\n    \n        if (feedbackButtons.length > 0) {\n            feedbackButtons.forEach(feedbackButton => {\n                feedbackButton.addEventListener('click', function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n    \n                    // Set pressed state\n                    this.setAttribute(\"aria-pressed\", \"true\");\n    \n                    // Submit answer\n                    self.submitInitialResponse(\n                        customerFeedbackInstance, \n                        self.settings.postId, \n                        this.getAttribute('data-js-cf-action')\n                    );\n                });\n            });\n        }\n    };\n\n    /**\n     * Handle topic selection, toggles comment section\n     * \n     * @param {HTMLElement} customerFeedbackInstance\n     * @returns {void} \n     */\n    Form.prototype.handleTopicSelection = function (customerFeedbackInstance) {\n        let self = this;\n        const topicButtons = customerFeedbackInstance.querySelectorAll('[data-js-cf-topic]');\n        if (topicButtons.length > 0) {\n            topicButtons.forEach(topicButton => {\n                topicButton.addEventListener('click', function (e) {\n                    self.showPartial('comment');\n\n                    if(this.getAttribute('data-js-cf-has-written-feedback-capability') === 'true') {\n                        self.showPartial('gdpr');\n                        self.showSubPartial('text');\n                        self.showSubPartial('submit');\n\n                        if(this.getAttribute('data-js-cf-has-written-feedback-email') === 'true') {\n                            self.showSubPartial('email');\n                        } else {\n                            self.hideSubPartial('email');\n                        }\n                    } else { \n                        self.hidePartial('gdpr');\n\n                        self.hideSubPartial('text');\n                        self.hideSubPartial('email');\n                        self.showSubPartial('submit');\n                    }\n                });\n            });\n        }\n    }\n\n    /**\n     * Handle comment form submission\n     * \n     * @param {HTMLElement} customerFeedbackInstance \n     * @returns \n     */\n    Form.prototype.handleCommentFormSubmission = function (customerFeedbackInstance) {\n\n        let self = this;\n        const form = customerFeedbackInstance.querySelector('form');\n        if (!form) return;\n\n        form.addEventListener('submit', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            self.showLoader();\n            self.hideNotice('error');\n            self.hideNotice('success');\n\n            let data = new FormData(form);\n            data.append('action', 'submit_comment');\n            data.append('answerid', self.initialFeedbackId);\n            data.append('postid', self.settings.postId);\n\n            fetch(ajaxurl, {\n                method: 'POST',\n                credentials: 'same-origin',\n                headers: {\n                    'Cache-Control': 'no-cache',\n                },\n                body: data\n            }).then(response => {\n                if (response.status != 200) {\n                    throw new Error('Invalid response');\n                }\n                return response.json();\n            }).then(response => {\n                if(!response.data.id) {\n                    throw new Error('Invalid response (no id)');\n                }\n                return response;\n            }).then(response => {\n                self.showNotice('success');\n                self.hidePartial('topics');\n                self.hidePartial('comment');\n                self.hidePartial('gdpr');\n            }).catch(err => {\n                console.error(err);\n                self.showNotice('error');\n            }).finally(() => {\n                self.hideLoader();\n            });\n        });\n    }\n\n    /**\n     * Submits the initail yes or no response\n     * @param  {integer} postId Post id\n     * @param  {string}  answer Yes or no\n     * @return {void}\n     */\n    Form.prototype.submitInitialResponse = function (target, postId, answer) {\n\n        let data = {\n            action: 'submit_response',\n            postid: postId,\n            answer: answer\n        };\n\n        this.showLoader();\n\n        fetch(ajaxurl, {\n            method: 'POST',\n            credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'Cache-Control': 'no-cache',\n            },\n            body: new URLSearchParams(data)\n        }).then(response => {\n            if (response.status != 200) {\n                throw new Error('Invalid response');\n            }\n            return response.json();\n        }).then(response => {\n            if(!response.data.id) {\n                throw new Error('Invalid response (no id)');\n            }\n            return response;\n        }).then(response => {\n            this.hidePartial('buttons');\n            return response;\n        }).then(response => {\n            this.registerFeedBackGiven(postId, this.settings.frequency);\n\n            if (Array.isArray(this.settings.topics) && this.settings.topics.length > 1) {\n                this.initialFeedbackId = response.data.id;\n                this.showPartial('topics');\n                this.showPartial('send');\n            } else {\n                this.showNotice('success');\n            }\n        }).catch(err => {\n            console.error(err);\n            this.showNotice('error');\n            this.hidePartial('buttons');\n            return false;\n        }).finally(() => {\n            this.hideLoader();\n        });\n    };\n\n    /**\n     * Show a notice based on the key\n     * \n     * @param {string} key\n     */\n    Form.prototype.showNotice = function (key) {\n        this.showHideNotice(key, true);\n    };\n\n    /**\n     * Hide a notice based on the key\n     * \n     * @param {string} key\n     */\n    Form.prototype.hideNotice = function (key) {\n        this.showHideNotice(key, false);\n    };\n\n    /**\n     * Hide or show a notice based on the key\n     * \n     * @param {string} key  What notice to show\n     * @param {boolean} state What display state to set (true = show, false = hide)\n     */\n    Form.prototype.showHideNotice = function (key, state) {\n        if(state == false) {\n            this.hidePartial('notices');\n        } else {\n            this.showPartial('notices');\n        }\n        this.showHideByKey('data-js-cf-notification', key, state);\n    };\n\n    /**\n     * Displays a partial based on a key\n     * \n     * @param {string} key \n     */\n    Form.prototype.showPartial = function (key) {\n        this.showHidePartial(key, true);\n    }\n\n    /**\n     * Hides a partial based on a key\n     * \n     * @param {string} key \n     */\n    Form.prototype.hidePartial = function (key) {\n        this.showHidePartial(key, false);\n    }\n\n\n    /**\n     * Displays a partial based on a key\n     * \n     * @param {string} key \n     */\n    Form.prototype.showSubPartial = function (key) {\n        this.showHideSubPartial(key, true);\n    }\n\n    /**\n     * Hides a partial based on a key\n     * \n     * @param {string} key \n     */\n    Form.prototype.hideSubPartial = function (key) {\n        this.showHideSubPartial(key, false);\n    }\n\n     /**\n     * Shows and hides a partial based on a key\n     * \n     * @param {string} key \n     * @param {boolean} state \n     */\n     Form.prototype.showHideSubPartial = function (key, state) {\n        this.showHideByKey('data-js-cf-sub-part', key, state);\n    };\n\n    /**\n     * Shows and hides a partial based on a key\n     * \n     * @param {string} key \n     * @param {boolean} state \n     */\n    Form.prototype.showHidePartial = function (key, state) {\n        this.showHideByKey('data-js-cf-part', key, state);\n    };\n\n    /**\n     * Show or hide an element based on a key\n     * \n     * @param {string} dataElement\n     * @param {string} key\n     * @param {boolean} state\n     */\n    Form.prototype.showHideByKey = function (dataElement, key, state) {\n        const element = this.parentDomElement.querySelector('[' + dataElement + '=\"' + key + '\"]');\n        if (element) {\n            this.toggleDisplay(element, state);\n        }\n    }\n\n    /**\n     * Toggle display class, to show or hide an element\n     * \n     * @param {HTMLElement} element \n     * @param {boolean} state \n     * @returns \n     */\n    Form.prototype.toggleDisplay = function (element, state) {\n        if (!element) {\n            return;\n        }\n    \n        const displayClassPattern = /u-display--\\S+/g;\n        const currentClasses = [...element.classList].filter(cls => displayClassPattern.test(cls));\n    \n        if (state) {\n            const previousDisplay = element.getAttribute('data-display-toggle');\n            if (previousDisplay) {\n                element.classList.add(...previousDisplay.split(' '));\n                element.removeAttribute('data-display-toggle');\n            }\n            element.classList.remove('u-display--none');\n\n            //If there are any form elements in this element, enable them\n            const formElements = element.querySelectorAll('input, textarea, button, select');\n            if (formElements.length > 0) {\n                formElements.forEach(formElement => {\n                    formElement.disabled = false;\n                });\n            }\n\n        } else {\n            if (currentClasses.length > 0) {\n                element.setAttribute('data-display-toggle', currentClasses.join(' '));\n                element.classList.remove(...currentClasses);\n            }\n            element.classList.add('u-display--none');\n\n            //If there are any form elements in this element, reset them and disable them\n            const formElements = element.querySelectorAll('input, textarea, button, select');\n            if (formElements.length > 0) {\n                formElements.forEach(formElement => {\n                    formElement.disabled = true;\n                });\n            }\n        }\n    }\n\n    /**\n     * Show loader \n     */\n    Form.prototype.showLoader = function () {\n        this.parentDomElement.querySelector('[data-js-cf-loader]').style.display = 'block';\n    }\n\n    /**\n     * Hide loader\n     */\n    Form.prototype.hideLoader = function () {\n        this.parentDomElement.querySelector('[data-js-cf-loader]').style.display = 'none';\n    }\n    \n    /**\n     * Check if post id exists in local storage\n     * @param {int} postId \n     * @returns {boolean} True if post id exists in local storage, false if not\n     */\n    Form.prototype.hasGivenFeedback = function (postId, days = 7) {\n        if (!postId) return false;\n    \n        const givenFeedback = JSON.parse(localStorage.getItem('givenFeedback')) || {};\n        const lastGiven = givenFeedback[postId] || 0;\n        const now = Date.now();\n        const timePassed = (now - lastGiven) / (1000 * 60 * 60 * 24); // Convert milliseconds to days\n    \n        return timePassed < days; // Returns true if feedback was given within N days\n    };\n    \n    /**\n     * Register post id in local storage\n     * @param {int} postId \n     * \n     * @returns {void}\n     */\n    Form.prototype.registerFeedBackGiven = function (postId, days = 7) {\n        if (!postId) {\n            return false;\n        }\n\n        if(days == 0) {\n            return true;\n        }\n    \n        let givenFeedback = JSON.parse(localStorage.getItem('givenFeedback')) || {};\n    \n        let now = Date.now();\n        let lastGiven = givenFeedback[postId] || 0;\n        let timePassed = (now - lastGiven) / (1000 * 60 * 60 * 24);\n    \n        if (timePassed >= days) {\n            givenFeedback[postId] = now;\n            localStorage.setItem('givenFeedback', JSON.stringify(givenFeedback));\n            return true;\n        }\n        return false;\n    };\n\n    return new Form();\n}\n","import Form from './form';\n\nwindow.addEventListener('DOMContentLoaded', function(event) {\n  Form(); \n});\n"],"names":["Form","this","parentDomElement","document","querySelector","getSettings","renderInitialState","handleFeedbackButtons","handleTopicSelection","handleCommentFormSubmission","prototype","customerFeedbackInstance","settings","JSON","parse","getAttribute","error","console","hidePartial","hideNotice","hasGivenFeedback","postId","frequency","showNotice","showPartial","self","feedbackButtons","querySelectorAll","length","forEach","feedbackButton","addEventListener","e","preventDefault","stopPropagation","setAttribute","submitInitialResponse","topicButtons","topicButton","showSubPartial","hideSubPartial","form","showLoader","data","FormData","append","initialFeedbackId","fetch","ajaxurl","method","credentials","headers","body","then","response","status","Error","json","id","catch","err","finally","hideLoader","target","answer","action","postid","URLSearchParams","registerFeedBackGiven","Array","isArray","topics","key","showHideNotice","state","showHideByKey","showHidePartial","showHideSubPartial","dataElement","element","toggleDisplay","displayClassPattern","currentClasses","classList","filter","cls","test","previousDisplay","add","split","removeAttribute","remove","formElements","formElement","disabled","join","style","display","days","lastGiven","localStorage","getItem","Date","now","givenFeedback","setItem","stringify","window","event"],"ignoreList":[],"sourceRoot":""}